#!/bin/bash
# Runtipi Installation Script

set -e

RUNTIPI_DIR="$HOME/runtipi"
INSTALL_FLAG="$HOME/.runtipi-installed"

# Exit if already installed
if [ -f "$INSTALL_FLAG" ]; then
    echo "Runtipi already installed"
    exit 0
fi

echo "=== Installing Runtipi ==="

# Install Runtipi using official installer (runs as user 'runtipi')
curl -L https://setup.runtipi.io | bash

# Mark as installed
touch "$INSTALL_FLAG"

echo ""
echo "=== Runtipi installed! ==="
echo "Access at: http://$(hostname -I | awk '{print $1}')"
echo ""
